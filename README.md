## MegaD для Home Assistant
*Неофициальная версия интеграции.*

![python version](https://img.shields.io/badge/Python-3.13-yellowgreen?style=plastic&logo=python)
![pydantic version](https://img.shields.io/badge/pydantic-ha-yellowgreen?style=plastic&logo=fastapi)
![aiohttp version](https://img.shields.io/badge/aiohttp-ha-yellowgreen?style=plastic)
![Home Assistant](https://img.shields.io/badge/HomeAssistant-latest-yellowgreen?style=plastic&logo=homeassistant)

#### Поддержать разработку

[![Donate](https://img.shields.io/badge/donate-Tinkoff-FFDD2D.svg)](https://www.tinkoff.ru/rm/shutov.mikhail19/wUyu873109)

## Описание
Компонент для управления устройствами [MegaD](https://ab-log.ru/) из Home Assistant. 


> [!WARNING]
> Интеграция находится на начальной стадии разработки.
> Ниже приведён функционал на данный момент.
 
## Возможности.
### Конфигурация.
Интеграция умеет сохранять конфигурацию контроллера и записывать её обратно в MegaD.
Если что-то случится с устройством, то можно заменить его и записать сохранённую 
конфигурацию. И не придётся настраивать всё вручную.

### Бинарные сенсоры.
В НА добавляются порты в качестве бинарного сенсора только те порты IN у которых в интерфейсе
MegaD в поле "Mode" стоит значение "P&R" или значения "P", "R" но если установлена
галочка ☑ у этого поля. В противном случае порт будет добавлен как счетчик или [сенсор кнопки](#сенсоры-кнопок.)
В поле "Title" порта (настройка MegaD) можно указать название сенсора, его тип и инверсию.
**Помните, что контроллер ограничивает это поле 25 символами.**

Формат: имя сенсора/тип устройства/инверсия
* Имя устройства может быть любым, главное ограничение количество символов
* Тип устройства состоит из 1 или 2 букв английского алфавита. Поддерживаемые типы устройств:
    - Движение (motion) -> m
    - Окно (window) -> w
    - Дверь (door) -> d
    - Гаражные ворота (garage_door) -> gd
    - Замок (lock) -> l
    - Обнаружение влаги (moisture) -> ms
    - Обнаружение дыма (smoke) -> s
* Инверсия имеет значения 1 или 0. По умолчанию 0.

Примеры:
* Дверь/d -> Имя "Дверь" / Тип в НА door / инверсии нет
* Коридор/m/1 -> Имя "Коридор" / Тип в НА motion / инверсии установлена
* Плита -> Имя "Плита" / Тип в НА None / инверсии нет

### Сенсоры кнопок.


## В планах 

- [x] ~~Добавление бинарных сенсоров с настройкой класса устройства для НА~~
- [ ] Добавление сенсоров кнопок с поддержкой одиночного, двойного, долгого нажатий
- [ ] Добавление релейных выходов с настройкой класса устройства для НА
- [ ] Добавление 1wire сенсоров
- [ ] Добавление сенсоров dht сенсоров
- [ ] Добавление I2C сенсоров
- [ ] Обновление прошивки контроллера из НА

*Свои предложения можете писать в issues*

## Установка.
На данном этапе установка возможна только путём копирования интеграции в каталог
custom_components.